import { Callout, Steps } from "nextra-theme-docs";

# Multi-Factor authentication

ROQ provides an additional layer of protection, which is **Multi-Factor Authentication** or called **MFA**. This security enhancement allows you to use your phone number as additional authentication.

## MFA SMS setup

A few steps must be taken on the ROQ Console before using the multi-factor authentication with SMS.

<Steps>
### Enable SMS integrations

To utilize MFA through SMS on ROQ, you must enable SMS integration in the ROQ Console. The SMS integration can be done by going to the **Integrations** → **SMS** menu and activating the integrations. 

![](/screenshots/mfa-enable-sms-integration.png)

<Callout type="info">
Please note that at least one active SMS integration is required.
</Callout>

### Enable MFA on authentication configuration

The next step is to enable MFA on the registration or login form in the ROQ Console. 

Go to the [ROQ Console](https://console.roq.tech), select **Authentication** → **Design** menu. Find the **Form Configuration** section to enable MFA. To enable MFA for each registration form variant, you should enable it individually by selecting the **Two-factor Authentication** flag.

![enable mfa on auth config](/screenshots/mfa-enable-auth-configuration.png)

<Callout type="info">
This configuration will impact new users who register. To implement MFA for existing users, please follow the next steps. 
</Callout>

### Enable MFA for existing users

To activate Multi-factor Authentication for existing users, you must turn on the ROQ Console's user MFA option. Navigate to the **Users** → **User Details** section and choose the specific users you wish to enable MFA.

Two settings require attention:

- **Two-factor Authentication**: Enable this option to apply MFA to the selected user.
- **Phone**: Enter your phone number, which will be used to send the OTP for login verification.

![enable two factor auth for a user](/screenshots/mfa-enable-user-two-factor-auth.png)

</Steps>

Users will have the Multi-factor Authentication feature once the above steps have been completed.

## MFA for existing users

Next, when the existing users with MFA enabled try to log in, the user will be asked to enter a verification code. The user workflow can be described in the steps below:

<Steps>

### Enter OTP

ROQ will send a One-Time Password or OTP for login verification to the user phone number registered on the ROQ Console ([Step 3](/user-registration/mfa#enable-mfa-for-existing-users) on MFA SMS Setup above). 

![mfa user verification code](/screenshots/mfa-user-send-verification-code.png)

You can also change the number if you have entered the wrong phone number by clicking the **Change phone number**.

### Recovery codes

Users with successful verification will get the recovery codes, which can be saved through manual copy-paste or downloading the recovery codes file.

![mfa recovery codes](/screenshots/mfa-recovery-codes.png)

<Callout type="warning">
The recovery codes will only be displayed once. Please ensure you keep them safe and confidential.
</Callout>

</Steps>

## MFA for new users

For a new user, MFA will be applied after successful registration. The user workflow can be shown in the steps below:

<Steps>

### Enter Phone Number

After registering successfully, new users will be prompted to provide their phone number to receive an OTP SMS as additional authentication.

At present, it is necessary to include both the phone number and its corresponding international code.

![ask phone number](/screenshots/mfa-new-user-ask-phone.png)

### Enter OTP  

The following steps are the same for existing users. You will need to enter the OTP into the MFA form for verification.

![mfa user verification code](/screenshots/mfa-user-send-verification-code.png)

### Recovery Codes

You will receive a list of recovery codes, and you should backup by copying and pasting or downloading the recovery codes file.

![mfa recovery codes](/screenshots/mfa-recovery-codes.png)

Again, please ensure you keep them safe and confidential.

</Steps>

## Disable MFA

If the Two-Factor Authentication flag is turned off in the ROG Console authentication settings, users will not be required to verify their login, even if they have MFA enabled.